
local function _or(...)
	return {type="or", options={...}}
end

local helpmessages = {
	{
		req_strings = {"how", "chat", _or("image", "img", "picture", "speech", "tts")},
		help_msg = "To get access to chat images/TTS, you need to donate (type !donate to find out more)."
	},{
		req_strings = {"how", "warden"},
		help_msg = "To be added to warden vote, press F3 while being a guard."
	},{
		req_strings = {"how", _or("join", "go", "become", "be", "select", "turn"), _or("team", "guard", "warden", "game", "prisoner")},
		help_msg = "To join a team, hold tab and click on one of the team labels (Guard, Prisoner, Spectator)."	
	},{
		req_strings = {"help"},
		help_msg = "Press F1 to view help and tutorials."
	},{
		req_strings = {_or("fuck", "stfu", "nigger", "fag")},
		help_msg = "Keep calm and make sure you have a good time!"
	},{
		req_strings = {"can", "i", "have", _or("cred", "points", "model", "skin")},
		help_msg = "No you can't."	
	},{
		req_strings = {_or("rdm","votekick")},
		help_msg = "Type !votebanguard <their name> to get the RDMer banned from guard."
	},{
	    req_strings = {_or("how", "can"), "drop", "weapon"},
	    help_msg = "Press 'q' to drop your active weapon. F1 for additional help!"
	},{
	    req_strings = {_or("how", "can"), "find", "weapon"},
	    help_msg = "Weapons spawn in armory but there are also weapon spawns around the map."
	},{
	    req_strings = {"how", "get", _or("point", "credit")},
	    help_msg = "You can get points by completing achievements or donating using !donate."
	},{
	    req_strings = {"how", _or("do", "to", "can"), "donate"},
	    help_msg = "Type !donate to see donation options."
	}
}

hook.Add("OnPlayerChat", "ListenToPlayersCryingForHalp", function(ply, text)
	text = text:lower()
	if ply == LocalPlayer() then
		for _,v in pairs(helpmessages) do
			local found = true
			for _,rs in pairs(v.req_strings) do
				if type(rs) == "string" and not string	.find(text, rs) then
					found = false
					break
				elseif type(rs) == "table" then
					local ifound = false
					for _,opt in pairs(rs.options) do
						if string.find(text, opt) then ifound = true end
					end
					if not ifound then
						found = false
					end
				end
			end
			if not found then continue end
			timer.Simple(0, function()
				chat.AddText(Color(155, 89, 182), "[HELP]", Color(189, 195, 199), " ", v.help_msg)
			end)
		end
	end
end)